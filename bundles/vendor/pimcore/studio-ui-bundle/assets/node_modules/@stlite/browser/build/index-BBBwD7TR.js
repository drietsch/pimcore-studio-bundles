import{c as C,r,L as M,bv as T,bw as j,j as l,aZ as L,a_ as k,bb as $,a$ as V,aJ as A,bu as N,bx as B,bq as H,b9 as O,by as P}from"./index-DDFagdcg.js";import{a as E}from"./useBasicWidgetState-DlvpZzDY.js";const F=C("div",{target:"e6zijwc0"})(({theme:o})=>({"span[aria-disabled='true']":{background:o.colors.fadedText05}}),""),G=(o,t)=>o.getIntArrayValue(t),U=o=>o.default??null,D=o=>o.value??null,K=(o,t,n,p)=>{t.setIntArrayValue(o,n.value,{fromUi:n.fromUi},p)},q=o=>{var S;const{element:t,widgetMgr:n,width:p,fragmentId:f}=o,e=M(),[s,m]=E({getStateFromWidgetMgr:G,getDefaultStateFromProto:U,getCurrStateFromProto:D,updateWidgetMgrState:K,element:t,widgetMgr:n,fragmentId:f}),u=t.maxSelections>0&&s.length>=t.maxSelections,y=r.useMemo(()=>{if(t.maxSelections===0)return"No results";if(s.length===t.maxSelections){const i=t.maxSelections!==1?"options":"option";return`You can only select up to ${t.maxSelections} ${i}. Remove an option first.`}return"No results"},[t.maxSelections,s.length]),v=r.useMemo(()=>s.map(i=>{const a=t.options[i];return{value:i.toString(),label:a}}),[t.options,s]),h=r.useCallback(i=>{const a=()=>{var c;const g=(c=i.option)==null?void 0:c.value;return parseInt(g,10)};switch(i.type){case"remove":return T(s,a());case"clear":return[];case"select":return s.concat([a()]);default:throw new Error(`State transition is unknown: ${i.type}`)}},[s]),x=r.useCallback(i=>{t.maxSelections&&i.type==="select"&&s.length>=t.maxSelections||m({value:h(i),fromUi:!0})},[t.maxSelections,h,m,s.length]),z=r.useCallback((i,a)=>{if(u)return[];const g=i.filter(c=>!s.includes(Number(c.value)));return j(g,a)},[u,s]),w={width:p},{options:d}=t,b=d.length===0?!0:o.disabled,R=d.length===0?"No options to select.":t.placeholder,I=d.map((i,a)=>({label:i,value:a.toString()})),W=d.length>10;return l.jsxs("div",{className:"stMultiSelect","data-testid":"stMultiSelect",style:w,children:[l.jsx(L,{label:t.label,disabled:b,labelVisibility:k((S=t.labelVisibility)==null?void 0:S.value),children:t.help&&l.jsx($,{children:l.jsx(V,{content:t.help,placement:A.TOP_RIGHT})})}),l.jsx(F,{children:l.jsx(N,{options:I,labelKey:"label",valueKey:"value","aria-label":t.label,placeholder:R,type:B.select,multi:!0,onChange:x,value:v,disabled:b,size:"compact",noResultsMsg:y,filterOptions:z,closeOnSelect:!1,overrides:{SelectArrow:{component:H,props:{overrides:{Svg:{style:()=>({width:e.iconSizes.xl,height:e.iconSizes.xl})}}}},IconsContainer:{style:()=>({paddingRight:e.spacing.sm})},ControlContainer:{style:{minHeight:e.sizes.minElementHeight,borderLeftWidth:e.sizes.borderWidth,borderRightWidth:e.sizes.borderWidth,borderTopWidth:e.sizes.borderWidth,borderBottomWidth:e.sizes.borderWidth}},Placeholder:{style:()=>({flex:"inherit",opacity:"0.7"})},ValueContainer:{style:()=>({paddingLeft:e.spacing.sm,paddingTop:e.spacing.none,paddingBottom:e.spacing.none,paddingRight:e.spacing.none})},ClearIcon:{props:{overrides:{Svg:{style:{color:e.colors.darkGray,padding:e.spacing.threeXS,height:e.sizes.clearIconSize,width:e.sizes.clearIconSize,":hover":{fill:e.colors.bodyText}}}}}},SearchIcon:{style:{color:e.colors.darkGray}},Tag:{props:{overrides:{Root:{style:{borderTopLeftRadius:e.radii.md,borderTopRightRadius:e.radii.md,borderBottomRightRadius:e.radii.md,borderBottomLeftRadius:e.radii.md,fontSize:e.fontSizes.md,paddingLeft:e.spacing.sm,marginLeft:e.spacing.none,marginRight:e.spacing.sm,height:`calc(${e.sizes.minElementHeight} - 2 * ${e.spacing.xs})`,maxWidth:`calc(100% - ${e.spacing.lg})`}},Action:{style:{paddingLeft:0}},ActionIcon:{props:{overrides:{Svg:{style:{width:"0.625em",height:"0.625em"}}}}}}}},MultiValue:{props:{overrides:{Root:{style:{fontSize:e.fontSizes.sm}}}}},Input:{props:{readOnly:O&&W===!1?"readonly":null}},Dropdown:{component:P}}})})]})},_=r.memo(q);export{_ as default};
