import{R as Q,r as T}from"./index-DDFagdcg.js";import{s as Ie}from"./index-D80gPO1Q.js";const Re=Ie("div")({name:"NumberOverlayEditorStyle",class:"gdg-n15fjm3e",propsAsIs:!1});function se(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(r[a[n]]=e[a[n]]);return r}var X;(function(e){e.event="event",e.props="prop"})(X||(X={}));function G(){}function Ae(e){var t,r=void 0;return function(){for(var a=[],n=arguments.length;n--;)a[n]=arguments[n];return t&&a.length===t.length&&a.every(function(o,l){return o===t[l]})||(t=a,r=e.apply(void 0,a)),r}}function ee(e){return!!(e||"").match(/\d/)}function Z(e){return e==null}function je(e){return typeof e=="number"&&isNaN(e)}function ce(e){return Z(e)||je(e)||typeof e=="number"&&!isFinite(e)}function fe(e){return e.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}function Te(e){switch(e){case"lakh":return/(\d+?)(?=(\d\d)+(\d)(?!\d))(\.\d+)?/g;case"wan":return/(\d)(?=(\d{4})+(?!\d))/g;case"thousand":default:return/(\d)(?=(\d{3})+(?!\d))/g}}function Fe(e,t,r){var a=Te(r),n=e.search(/[1-9]/);return n=n===-1?e.length:n,e.substring(0,n)+e.substring(n,e.length).replace(a,"$1"+t)}function Be(e){var t=T.useRef(e);t.current=e;var r=T.useRef(function(){for(var a=[],n=arguments.length;n--;)a[n]=arguments[n];return t.current.apply(t,a)});return r.current}function ue(e,t){t===void 0&&(t=!0);var r=e[0]==="-",a=r&&t;e=e.replace("-","");var n=e.split("."),o=n[0],l=n[1]||"";return{beforeDecimal:o,afterDecimal:l,hasNegation:r,addNegation:a}}function Me(e){if(!e)return e;var t=e[0]==="-";t&&(e=e.substring(1,e.length));var r=e.split("."),a=r[0].replace(/^0+/,"")||"0",n=r[1]||"";return(t?"-":"")+a+(n?"."+n:"")}function ve(e,t,r){for(var a="",n=r?"0":"",o=0;o<=t-1;o++)a+=e[o]||n;return a}function de(e,t){return Array(t+1).join(e)}function me(e){var t=e+"",r=t[0]==="-"?"-":"";r&&(t=t.substring(1));var a=t.split(/[eE]/g),n=a[0],o=a[1];if(o=Number(o),!o)return r+n;n=n.replace(".","");var l=1+o,g=n.length;return l<0?n="0."+de("0",Math.abs(l))+n:l>=g?n=n+de("0",l-g):n=(n.substring(0,l)||"0")+"."+n.substring(l),r+n}function ge(e,t,r){if(["","-"].indexOf(e)!==-1)return e;var a=(e.indexOf(".")!==-1||r)&&t,n=ue(e),o=n.beforeDecimal,l=n.afterDecimal,g=n.hasNegation,S=parseFloat("0."+(l||"0")),y=l.length<=t?"0."+l:S.toFixed(t),p=y.split("."),d=o.split("").reverse().reduce(function(w,N,m){return w.length>m?(Number(w[0])+Number(N)).toString()+w.substring(1,w.length):N+w},p[0]),h=ve(p[1]||"",t,r),b=g?"-":"",v=a?".":"";return""+b+d+v+h}function z(e,t){if(e.value=e.value,e!==null){if(e.createTextRange){var r=e.createTextRange();return r.move("character",t),r.select(),!0}return e.selectionStart||e.selectionStart===0?(e.focus(),e.setSelectionRange(t,t),!0):(e.focus(),!1)}}var pe=Ae(function(e,t){for(var r=0,a=0,n=e.length,o=t.length;e[r]===t[r]&&r<n;)r++;for(;e[n-1-a]===t[o-1-a]&&o-a>r&&n-a>r;)a++;return{from:{start:r,end:n-a},to:{start:r,end:o-a}}});function Pe(e,t,r){return Math.min(Math.max(e,t),r)}function ie(e){return Math.max(e.selectionStart,e.selectionEnd)}function ke(){return typeof navigator<"u"&&!(navigator.platform&&/iPhone|iPod/.test(navigator.platform))}function Le(e){return{from:{start:0,end:0},to:{start:0,end:e.length},lastValue:""}}function We(e){var t=e.currentValue,r=e.formattedValue,a=e.currentValueIndex,n=e.formattedValueIndex;return t[a]===r[n]}function Ke(e,t,r,a,n,o,l){l===void 0&&(l=We);var g=n.findIndex(function(W){return W}),S=e.slice(0,g);!t&&!r.startsWith(S)&&(t=S,r=S+r,a=a+S.length);for(var y=r.length,p=e.length,d={},h=new Array(y),b=0;b<y;b++){h[b]=-1;for(var v=0,w=p;v<w;v++){var N=l({currentValue:r,lastValue:t,formattedValue:e,currentValueIndex:b,formattedValueIndex:v});if(N&&d[v]!==!0){h[b]=v,d[v]=!0;break}}}for(var m=a;m<y&&(h[m]===-1||!o(r[m]));)m++;var F=m===y||h[m]===-1?p:h[m];for(m=a-1;m>0&&h[m]===-1;)m--;var M=m===-1||h[m]===-1?0:h[m]+1;return M>F?F:a-M<F-a?M:F}function he(e,t,r,a){var n=e.length;if(t=Pe(t,0,n),a==="left"){for(;t>=0&&!r[t];)t--;t===-1&&(t=r.indexOf(!0))}else{for(;t<=n&&!r[t];)t++;t>n&&(t=r.lastIndexOf(!0))}return t===-1&&(t=n),t}function Ue(e){for(var t=Array.from({length:e.length+1}).map(function(){return!0}),r=0,a=t.length;r<a;r++)t[r]=!!(ee(e[r])||ee(e[r-1]));return t}function Se(e,t,r,a,n,o){o===void 0&&(o=G);var l=Be(function(v,w){var N,m;return ce(v)?(m="",N=""):typeof v=="number"||w?(m=typeof v=="number"?me(v):v,N=a(m)):(m=n(v,void 0),N=a(m)),{formattedValue:N,numAsString:m}}),g=T.useState(function(){return l(Z(e)?t:e,r)}),S=g[0],y=g[1],p=function(v,w){v.formattedValue!==S.formattedValue&&y({formattedValue:v.formattedValue,numAsString:v.value}),o(v,w)},d=e,h=r;Z(e)&&(d=S.numAsString,h=!0);var b=l(d,h);return T.useMemo(function(){y(b)},[b.formattedValue]),[S,p]}function Ge(e){return e.replace(/[^0-9]/g,"")}function _e(e){return e}function $e(e){var t=e.type;t===void 0&&(t="text");var r=e.displayType;r===void 0&&(r="input");var a=e.customInput,n=e.renderText,o=e.getInputRef,l=e.format;l===void 0&&(l=_e);var g=e.removeFormatting;g===void 0&&(g=Ge);var S=e.defaultValue,y=e.valueIsNumericString,p=e.onValueChange,d=e.isAllowed,h=e.onChange;h===void 0&&(h=G);var b=e.onKeyDown;b===void 0&&(b=G);var v=e.onMouseUp;v===void 0&&(v=G);var w=e.onFocus;w===void 0&&(w=G);var N=e.onBlur;N===void 0&&(N=G);var m=e.value,F=e.getCaretBoundary;F===void 0&&(F=Ue);var M=e.isValidInputCharacter;M===void 0&&(M=ee);var W=e.isCharacterSame,P=se(e,["type","displayType","customInput","renderText","getInputRef","format","removeFormatting","defaultValue","valueIsNumericString","onValueChange","isAllowed","onChange","onKeyDown","onMouseUp","onFocus","onBlur","value","getCaretBoundary","isValidInputCharacter","isCharacterSame"]),_=Se(m,S,!!y,l,g,p),K=_[0],V=K.formattedValue,k=K.numAsString,$=_[1],L=T.useRef({formattedValue:V,numAsString:k}),J=function(u,i){L.current={formattedValue:u.formattedValue,numAsString:u.value},$(u,i)},U=T.useState(!1),q=U[0],H=U[1],s=T.useRef(null),c=T.useRef({setCaretTimeout:null,focusTimeout:null});T.useEffect(function(){return H(!0),function(){clearTimeout(c.current.setCaretTimeout),clearTimeout(c.current.focusTimeout)}},[]);var A=l,D=function(u,i){var f=parseFloat(i);return{formattedValue:u,value:i,floatValue:isNaN(f)?void 0:f}},C=function(u,i,f){u.selectionStart===0&&u.selectionEnd===u.value.length||(z(u,i),c.current.setCaretTimeout=setTimeout(function(){u.value===f&&u.selectionStart!==u.selectionEnd&&z(u,i)},0))},I=function(u,i,f){return he(u,i,F(u),f)},B=function(u,i,f){var E=F(i),O=Ke(i,V,u,f,E,M,W);return O=he(i,O,E),O},te=function(u){var i=u.formattedValue;i===void 0&&(i="");var f=u.input,E=u.setCaretPosition;E===void 0&&(E=!0);var O=u.source,x=u.event,R=u.numAsString,j=u.caretPos;if(f){if(j===void 0&&E){var Y=u.inputValue||f.value,oe=ie(f);f.value=i,j=B(Y,i,oe)}f.value=i,E&&j!==void 0&&C(f,j,i)}i!==V&&J(D(i,R),{event:x,source:O})};T.useEffect(function(){var u=L.current,i=u.formattedValue,f=u.numAsString;V!==i&&(V!==k||i!==f)&&J(D(V,k),{event:void 0,source:X.props})},[V,k]);var ae=s.current?ie(s.current):void 0,re=typeof window<"u"?T.useLayoutEffect:T.useEffect;re(function(){var u=s.current;if(V!==L.current.formattedValue&&u){var i=B(L.current.formattedValue,V,ae);u.value=V,C(u,i,V)}},[V]);var Ve=function(u,i,f){var E=pe(V,u),O=Object.assign(Object.assign({},E),{lastValue:V}),x=g(u,O),R=A(x);if(x=g(R,void 0),d&&!d(D(R,x))){var j=i.target,Y=ie(j),oe=B(u,V,Y);return j.value=V,C(j,oe,V),!1}return te({formattedValue:R,numAsString:x,inputValue:u,event:i,source:f,setCaretPosition:!0,input:i.target}),!0},xe=function(u){var i=u.target,f=i.value,E=Ve(f,u,X.event);E&&h(u)},we=function(u){var i=u.target,f=u.key,E=i.selectionStart,O=i.selectionEnd,x=i.value;x===void 0&&(x="");var R;if(f==="ArrowLeft"||f==="Backspace"?R=Math.max(E-1,0):f==="ArrowRight"?R=Math.min(E+1,x.length):f==="Delete"&&(R=E),R===void 0||E!==O){b(u);return}var j=R;if(f==="ArrowLeft"||f==="ArrowRight"){var Y=f==="ArrowLeft"?"left":"right";j=I(x,R,Y),j!==R&&u.preventDefault()}else f==="Delete"&&!M(x[R])?j=I(x,R,"right"):f==="Backspace"&&!M(x[R])&&(j=I(x,R,"left"));j!==R&&C(i,j,x),u.isUnitTestRun&&C(i,j,x),b(u)},Ne=function(u){var i=u.target,f=i.selectionStart,E=i.selectionEnd,O=i.value;if(O===void 0&&(O=""),f===E){var x=I(O,f);x!==f&&C(i,x,O)}v(u)},De=function(u){u.persist&&u.persist();var i=u.target;s.current=i,c.current.focusTimeout=setTimeout(function(){var f=i.selectionStart,E=i.selectionEnd,O=i.value;O===void 0&&(O="");var x=I(O,f);x!==f&&!(f===0&&E===O.length)&&C(i,x,O),w(u)},0)},Ce=function(u){s.current=null,clearTimeout(c.current.focusTimeout),clearTimeout(c.current.setCaretTimeout),N(u)},Ee=q&&ke()?"numeric":void 0,le=Object.assign({inputMode:Ee},P,{type:t,value:V,onChange:xe,onKeyDown:we,onMouseUp:Ne,onFocus:De,onBlur:Ce});if(r==="text")return n?Q.createElement(Q.Fragment,null,n(V,P)||null):Q.createElement("span",Object.assign({},P,{ref:o}),V);if(a){var Oe=a;return Q.createElement(Oe,Object.assign({},le,{ref:o}))}return Q.createElement("input",Object.assign({},le,{ref:o}))}function be(e,t){var r=t.decimalScale,a=t.fixedDecimalScale,n=t.prefix;n===void 0&&(n="");var o=t.suffix;o===void 0&&(o="");var l=t.allowNegative,g=t.thousandsGroupStyle;if(g===void 0&&(g="thousand"),e===""||e==="-")return e;var S=ne(t),y=S.thousandSeparator,p=S.decimalSeparator,d=r!==0&&e.indexOf(".")!==-1||r&&a,h=ue(e,l),b=h.beforeDecimal,v=h.afterDecimal,w=h.addNegation;return r!==void 0&&(v=ve(v,r,!!a)),y&&(b=Fe(b,y,g)),n&&(b=n+b),o&&(v=v+o),w&&(b="-"+b),e=b+(d&&p||"")+v,e}function ne(e){var t=e.decimalSeparator;t===void 0&&(t=".");var r=e.thousandSeparator,a=e.allowedDecimalSeparators;return r===!0&&(r=","),a||(a=[t,"."]),{decimalSeparator:t,thousandSeparator:r,allowedDecimalSeparators:a}}function ze(e,t){e===void 0&&(e="");var r=new RegExp("(-)"),a=new RegExp("(-)(.)*(-)"),n=r.test(e),o=a.test(e);return e=e.replace(/-/g,""),n&&!o&&t&&(e="-"+e),e}function Je(e,t){return new RegExp("(^-)|[0-9]|"+fe(e),"g")}function Qe(e,t,r){return e===""?!0:!(t!=null&&t.match(/\d/))&&!(r!=null&&r.match(/\d/))&&typeof e=="string"&&!isNaN(Number(e))}function Ze(e,t,r){var a;t===void 0&&(t=Le(e));var n=r.allowNegative,o=r.prefix;o===void 0&&(o="");var l=r.suffix;l===void 0&&(l="");var g=r.decimalScale,S=t.from,y=t.to,p=y.start,d=y.end,h=ne(r),b=h.allowedDecimalSeparators,v=h.decimalSeparator,w=e[d]===v;if(ee(e)&&(e===o||e===l)&&t.lastValue==="")return e;if(d-p===1&&b.indexOf(e[p])!==-1){var N=g===0?"":v;e=e.substring(0,p)+N+e.substring(p+1,e.length)}var m=function(c,A,D){var C=!1,I=!1;o.startsWith("-")?C=!1:c.startsWith("--")?(C=!1,I=!0):l.startsWith("-")&&c.length===l.length?C=!1:c[0]==="-"&&(C=!0);var B=C?1:0;return I&&(B=2),B&&(c=c.substring(B),A-=B,D-=B),{value:c,start:A,end:D,hasNegation:C}},F=m(e,p,d),M=F.hasNegation;a=F,e=a.value,p=a.start,d=a.end;var W=m(t.lastValue,S.start,S.end),P=W.start,_=W.end,K=W.value,V=e.substring(p,d);e.length&&K.length&&(P>K.length-l.length||_<o.length)&&!(V&&l.startsWith(V))&&(e=K);var k=0;e.startsWith(o)?k+=o.length:p<o.length&&(k=p),e=e.substring(k),d-=k;var $=e.length,L=e.length-l.length;e.endsWith(l)?$=L:(d>L||d>e.length-l.length)&&($=d),e=e.substring(0,$),e=ze(M?"-"+e:e,n),e=(e.match(Je(v))||[]).join("");var J=e.indexOf(v);e=e.replace(new RegExp(fe(v),"g"),function(c,A){return A===J?".":""});var U=ue(e,n),q=U.beforeDecimal,H=U.afterDecimal,s=U.addNegation;return y.end-y.start<S.end-S.start&&q===""&&w&&!parseFloat(H)&&(e=s?"-":""),e}function qe(e,t){var r=t.prefix;r===void 0&&(r="");var a=t.suffix;a===void 0&&(a="");var n=Array.from({length:e.length+1}).map(function(){return!0}),o=e[0]==="-";n.fill(!1,0,r.length+(o?1:0));var l=e.length;return n.fill(!1,l-a.length+1,l+1),n}function He(e){var t=ne(e),r=t.thousandSeparator,a=t.decimalSeparator,n=e.prefix;n===void 0&&(n="");var o=e.allowNegative;if(o===void 0&&(o=!0),r===a)throw new Error(`
        Decimal separator can't be same as thousand separator.
        thousandSeparator: `+r+` (thousandSeparator = {true} is same as thousandSeparator = ",")
        decimalSeparator: `+a+` (default value for decimalSeparator is .)
     `);return n.startsWith("-")&&o&&(console.error(`
      Prefix can't start with '-' when allowNegative is true.
      prefix: `+n+`
      allowNegative: `+o+`
    `),o=!1),Object.assign(Object.assign({},e),{allowNegative:o})}function Ye(e){e=He(e),e.decimalSeparator,e.allowedDecimalSeparators,e.thousandsGroupStyle;var t=e.suffix,r=e.allowNegative,a=e.allowLeadingZeros,n=e.onKeyDown;n===void 0&&(n=G);var o=e.onBlur;o===void 0&&(o=G);var l=e.thousandSeparator,g=e.decimalScale,S=e.fixedDecimalScale,y=e.prefix;y===void 0&&(y="");var p=e.defaultValue,d=e.value,h=e.valueIsNumericString,b=e.onValueChange,v=se(e,["decimalSeparator","allowedDecimalSeparators","thousandsGroupStyle","suffix","allowNegative","allowLeadingZeros","onKeyDown","onBlur","thousandSeparator","decimalScale","fixedDecimalScale","prefix","defaultValue","value","valueIsNumericString","onValueChange"]),w=ne(e),N=w.decimalSeparator,m=w.allowedDecimalSeparators,F=function(s){return be(s,e)},M=function(s,c){return Ze(s,c,e)},W=Z(d)?p:d,P=h??Qe(W,y,t);Z(d)?Z(p)||(P=P||typeof p=="number"):P=P||typeof d=="number";var _=function(s){return ce(s)?s:(typeof s=="number"&&(s=me(s)),P&&typeof g=="number"?ge(s,g,!!S):s)},K=Se(_(d),_(p),!!P,F,M,b),V=K[0],k=V.numAsString,$=V.formattedValue,L=K[1],J=function(s){var c=s.target,A=s.key,D=c.selectionStart,C=c.selectionEnd,I=c.value;if(I===void 0&&(I=""),D!==C){n(s);return}A==="Backspace"&&I[0]==="-"&&D===y.length+1&&r&&z(c,1),g&&S&&(A==="Backspace"&&I[D-1]===N?(z(c,D-1),s.preventDefault()):A==="Delete"&&I[D]===N&&s.preventDefault()),m!=null&&m.includes(A)&&I[D]===N&&z(c,D+1);var B=l===!0?",":l;A==="Backspace"&&I[D-1]===B&&z(c,D-1),A==="Delete"&&I[D]===B&&z(c,D+1),n(s)},U=function(s){var c=k;if(c.match(/\d/g)||(c=""),a||(c=Me(c)),S&&g&&(c=ge(c,g,S)),c!==k){var A=be(c,e);L({formattedValue:A,value:c,floatValue:parseFloat(c)},{event:s,source:X.event})}o(s)},q=function(s){return s===N?!0:ee(s)},H=function(s){var c=s.currentValue,A=s.lastValue,D=s.formattedValue,C=s.currentValueIndex,I=s.formattedValueIndex,B=c[C],te=D[I],ae=pe(A,c),re=ae.to;return C>=re.start&&C<re.end&&m&&m.includes(B)&&te===N?!0:B===te};return Object.assign(Object.assign({},v),{value:$,valueIsNumericString:!1,isValidInputCharacter:q,isCharacterSame:H,onValueChange:L,format:F,removeFormatting:M,getCaretBoundary:function(s){return qe(s,e)},onKeyDown:J,onBlur:U})}function Xe(e){var t=Ye(e);return Q.createElement($e,Object.assign({},t))}function ye(){var e,t,r;return((r=(t=(e=Intl.NumberFormat())==null?void 0:e.formatToParts(1.1))==null?void 0:t.find(a=>a.type==="decimal"))==null?void 0:r.value)??"."}function et(){return ye()==="."?",":"."}const tt=e=>{const{value:t,onChange:r,disabled:a,highlight:n,validatedSelection:o,fixedDecimals:l,allowNegative:g,thousandSeparator:S,decimalSeparator:y}=e,p=T.useRef();return T.useLayoutEffect(()=>{var d;if(o!==void 0){const h=typeof o=="number"?[o,null]:o;(d=p.current)==null||d.setSelectionRange(h[0],h[1])}},[o]),T.createElement(Re,null,T.createElement(Xe,{autoFocus:!0,getInputRef:p,className:"gdg-input",onFocus:d=>d.target.setSelectionRange(n?0:d.target.value.length,d.target.value.length),disabled:a===!0,decimalScale:l,allowNegative:g,thousandSeparator:S??et(),decimalSeparator:y??ye(),value:Object.is(t,-0)?"-":t??"",onValueChange:r}))};export{tt as default};
