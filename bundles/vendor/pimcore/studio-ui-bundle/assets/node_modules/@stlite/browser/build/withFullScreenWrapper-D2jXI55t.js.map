{"version":3,"file":"withFullScreenWrapper-D2jXI55t.js","sources":["../../../streamlit/frontend/lib/src/components/shared/FullScreenWrapper/styled-components.tsx","../../../streamlit/frontend/lib/src/components/shared/ElementFullscreen/ElementFullscreenContext.tsx","../../../streamlit/frontend/lib/src/hooks/useRequiredContext.tsx","../../../streamlit/frontend/lib/src/components/shared/ElementFullscreen/useFullscreen.tsx","../../../streamlit/frontend/lib/src/components/shared/ElementFullscreen/ElementFullscreenWrapper.tsx","../../../streamlit/frontend/lib/src/components/shared/FullScreenWrapper/withFullScreenWrapper.tsx"],"sourcesContent":["/**\n * Copyright (c) Streamlit Inc. (2018-2022) Snowflake Inc. (2022-2024)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport styled from \"@emotion/styled\"\n\nexport interface StyledFullScreenFrameProps {\n  isExpanded: boolean\n}\n\nexport const StyledFullScreenFrame = styled.div<StyledFullScreenFrameProps>(\n  ({ theme, isExpanded }) => ({\n    ...(isExpanded\n      ? {\n          position: \"fixed\",\n          top: 0,\n          left: 0,\n          bottom: 0,\n          right: 0,\n          background: theme.colors.bgColor,\n          zIndex: theme.zIndices.fullscreenWrapper,\n          padding: theme.spacing.md,\n          paddingTop: theme.sizes.fullScreenHeaderHeight,\n          overflow: [\"auto\", \"overlay\"],\n          display: \"flex\", // To avoid extra spaces that lead to scrollbars.\n          alignItems: \"center\",\n          justifyContent: \"center\",\n        }\n      : {}),\n  })\n)\n","/**\n * Copyright (c) Streamlit Inc. (2018-2022) Snowflake Inc. (2022-2024)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { createContext } from \"react\"\n\ntype ElementFullscreenContextShape = {\n  width: number\n  height: number | undefined\n  expanded: boolean\n  expand: () => void\n  collapse: () => void\n}\n\nexport const ElementFullscreenContext =\n  createContext<ElementFullscreenContextShape | null>(null)\nElementFullscreenContext.displayName = \"ElementFullscreenContext\"\n","/**\n * Copyright (c) Streamlit Inc. (2018-2022) Snowflake Inc. (2022-2024)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Context, useContext } from \"react\"\n\nexport const useRequiredContext = <R,>(context: Context<R | null>): R => {\n  const foundContext = useContext(context)\n\n  if (foundContext === null || foundContext === undefined) {\n    throw new Error(\n      `useRequiredContext: ${context.displayName ?? \"context\"} not found`\n    )\n  }\n\n  return foundContext\n}\n","/**\n * Copyright (c) Streamlit Inc. (2018-2022) Snowflake Inc. (2022-2024)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useCallback, useContext, useEffect, useMemo, useState } from \"react\"\n\nimport { LibContext } from \"@streamlit/lib/src/components/core/LibContext\"\nimport { WindowDimensionsContext } from \"@streamlit/lib/src/components/shared/WindowDimensions\"\nimport { useRequiredContext } from \"@streamlit/lib/src/hooks/useRequiredContext\"\n\nexport type UseEscapeToCollapseArgs = {\n  expanded: boolean\n  zoomOut: () => void\n}\n\nexport type UseFullscreenShape = {\n  expanded: boolean\n  fullHeight: number\n  fullWidth: number\n  zoomIn: () => void\n  zoomOut: () => void\n}\n\nexport const useFullscreen = (): UseFullscreenShape => {\n  const { setFullScreen } = useContext(LibContext)\n  const [expanded, setExpanded] = useState(false)\n  const { fullHeight, fullWidth } = useRequiredContext(WindowDimensionsContext)\n\n  const setExpandedState = useCallback(\n    (isExpanded: boolean) => {\n      // Set the local component-level state\n      setExpanded(isExpanded)\n      // Set the context-level state\n      setFullScreen(isExpanded)\n    },\n    [setFullScreen]\n  )\n\n  const zoomIn = useCallback(() => {\n    document.body.style.overflow = \"hidden\"\n    setExpandedState(true)\n  }, [setExpandedState])\n\n  const zoomOut = useCallback(() => {\n    // TODO: Update to match React best practices\n    // eslint-disable-next-line react-compiler/react-compiler\n    document.body.style.overflow = \"unset\"\n    setExpandedState(false)\n  }, [setExpandedState])\n\n  const controlKeys = useCallback(\n    (event: KeyboardEvent) => {\n      /**\n       * keyCode 27 is the ESC key\n       * @see https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/keyCode\n       */\n      if (event.keyCode === 27 && expanded) {\n        // Exit fullscreen\n        zoomOut()\n      }\n    },\n    [zoomOut, expanded]\n  )\n\n  useEffect(() => {\n    document.addEventListener(\"keydown\", controlKeys, false)\n\n    return () => {\n      document.removeEventListener(\"keydown\", controlKeys, false)\n    }\n  }, [controlKeys])\n\n  return useMemo(() => {\n    return { expanded, zoomIn, zoomOut, fullHeight, fullWidth }\n  }, [expanded, zoomIn, zoomOut, fullHeight, fullWidth])\n}\n","/**\n * Copyright (c) Streamlit Inc. (2018-2022) Snowflake Inc. (2022-2024)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { FC, PropsWithChildren, useMemo } from \"react\"\n\nimport { useTheme } from \"@emotion/react\"\n\nimport { StyledFullScreenFrame } from \"@streamlit/lib/src/components/shared/FullScreenWrapper/styled-components\"\nimport { ElementFullscreenContext } from \"@streamlit/lib/src/components/shared/ElementFullscreen/ElementFullscreenContext\"\nimport { EmotionTheme } from \"@streamlit/lib/src/theme\"\n\nimport { useFullscreen } from \"./useFullscreen\"\n\ntype ElementFullscreenWrapperProps = PropsWithChildren<{\n  height?: number\n  width: number\n}>\n\nconst ElementFullscreenWrapper: FC<ElementFullscreenWrapperProps> = ({\n  children,\n  height,\n  width,\n}) => {\n  const theme: EmotionTheme = useTheme()\n  const { expanded, fullHeight, fullWidth, zoomIn, zoomOut } = useFullscreen()\n\n  const fullscreenContextValue = useMemo(() => {\n    return {\n      width: expanded ? fullWidth : width,\n      height: expanded ? fullHeight : height,\n      expanded,\n      expand: zoomIn,\n      collapse: zoomOut,\n    }\n  }, [expanded, fullHeight, fullWidth, height, width, zoomIn, zoomOut])\n\n  return (\n    <ElementFullscreenContext.Provider value={fullscreenContextValue}>\n      <StyledFullScreenFrame\n        isExpanded={expanded}\n        data-testid=\"stFullScreenFrame\"\n        theme={theme}\n      >\n        {children}\n      </StyledFullScreenFrame>\n    </ElementFullscreenContext.Provider>\n  )\n}\n\nexport default ElementFullscreenWrapper\n","/**\n * Copyright (c) Streamlit Inc. (2018-2022) Snowflake Inc. (2022-2024)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { ComponentType, ReactElement } from \"react\"\n\nimport hoistNonReactStatics from \"hoist-non-react-statics\"\n\nimport ElementFullscreenWrapper from \"@streamlit/lib/src/components/shared/ElementFullscreen/ElementFullscreenWrapper\"\n\nfunction withFullScreenWrapper<P extends { width: number }>(\n  WrappedComponent: ComponentType<React.PropsWithChildren<P>>\n): ComponentType<React.PropsWithChildren<P>> {\n  const ComponentWithFullScreenWrapper = (props: P): ReactElement => {\n    return (\n      <ElementFullscreenWrapper width={props.width}>\n        <WrappedComponent {...(props as P)}></WrappedComponent>\n      </ElementFullscreenWrapper>\n    )\n  }\n  ComponentWithFullScreenWrapper.displayName = `withFullScreenWrapper(${\n    WrappedComponent.displayName || WrappedComponent.name\n  })`\n\n  // Static methods must be copied over\n  // https://en.reactjs.org/docs/higher-order-components.html#static-methods-must-be-copied-over\n  return hoistNonReactStatics(ComponentWithFullScreenWrapper, WrappedComponent)\n}\n\nexport default withFullScreenWrapper\n"],"names":["StyledFullScreenFrame","target","theme","isExpanded","position","top","left","bottom","right","background","colors","bgColor","zIndex","zIndices","fullscreenWrapper","padding","spacing","md","paddingTop","sizes","fullScreenHeaderHeight","overflow","display","alignItems","justifyContent","ElementFullscreenContext","createContext","displayName","useRequiredContext","context","foundContext","useContext","Error","useFullscreen","setFullScreen","LibContext","expanded","setExpanded","useState","fullHeight","fullWidth","WindowDimensionsContext","setExpandedState","useCallback","zoomIn","body","style","zoomOut","controlKeys","event","keyCode","useEffect","addEventListener","removeEventListener","useMemo","ElementFullscreenWrapper","children","height","width","useTheme","fullscreenContextValue","expand","collapse","jsx","withFullScreenWrapper","WrappedComponent","ComponentWithFullScreenWrapper","props","name","hoistNonReactStatics"],"mappings":"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"}