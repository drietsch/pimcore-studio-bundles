import{r,L as k,bY as W,j as s,aZ as H,a_ as D,bb as E,a$ as L,aJ as U}from"./index-DDFagdcg.js";import{u as _}from"./uniqueId-BN341tW-.js";import{u as A,a as B,b as M}from"./useOnInputChange-BVM7BjsY.js";import{I as P}from"./InputInstructions-C482tR9U.js";import{a as $}from"./useBasicWidgetState-DlvpZzDY.js";import{T as G}from"./textarea-J_qsqwbd.js";const S=(a,e)=>a.getStringValue(e)??e.default??null,J=a=>a.default??null,K=a=>a.value??null,N=(a,e,l,d)=>{e.setStringValue(a,l.value,{fromUi:l.fromUi},d)},O=({disabled:a,element:e,widgetMgr:l,fragmentId:d,width:p})=>{var x;const b=r.useRef(_("text_area_")).current,[i,n]=r.useState(!1),[I,c]=r.useState(!1),[o,m]=r.useState(S(l,e)??null),y=r.useCallback(()=>{m(e.default??null),n(!0)},[e]),[C,g]=$({getStateFromWidgetMgr:S,getDefaultStateFromProto:J,getCurrStateFromProto:K,updateWidgetMgrState:N,element:e,widgetMgr:l,fragmentId:d,onFormCleared:y});A(C,o,m,i);const t=k(),u=r.useCallback(()=>{n(!1),g({value:o,fromUi:!0})},[o,g]),T=r.useCallback(()=>{i&&u(),c(!1)},[i,u]),v=r.useCallback(()=>{c(!0)},[]),F=B({formId:e.formId,maxChars:e.maxChars,setDirty:n,setUiValue:m,setValueWithSource:g}),j=M(e.formId,u,i,l,d,!0),w={width:p},{height:f,placeholder:z,formId:h}=e,R=W({formId:h})?l.allowFormEnterToSubmit(h):i,V=I&&p>t.breakpoints.hideWidgetDetails;return s.jsxs("div",{className:"stTextArea","data-testid":"stTextArea",style:w,children:[s.jsx(H,{label:e.label,disabled:a,labelVisibility:D((x=e.labelVisibility)==null?void 0:x.value),htmlFor:b,children:e.help&&s.jsx(E,{children:s.jsx(L,{content:e.help,placement:U.TOP_RIGHT})})}),s.jsx(G,{value:o??"",placeholder:z,onBlur:T,onFocus:v,onChange:F,onKeyDown:j,"aria-label":e.label,disabled:a,id:b,overrides:{Input:{style:{lineHeight:t.lineHeights.inputWidget,height:f?`${f}px`:"",minHeight:t.sizes.largestElementHeight,resize:"vertical","::placeholder":{opacity:"0.7"},paddingRight:t.spacing.lg,paddingLeft:t.spacing.lg,paddingBottom:t.spacing.lg,paddingTop:t.spacing.lg}},Root:{props:{"data-testid":"stTextAreaRootElement"},style:{borderLeftWidth:t.sizes.borderWidth,borderRightWidth:t.sizes.borderWidth,borderTopWidth:t.sizes.borderWidth,borderBottomWidth:t.sizes.borderWidth}}}}),V&&s.jsx(P,{dirty:i,value:o??"",maxLength:e.maxChars,type:"multiline",inForm:W({formId:h}),allowEnterToSubmit:R})]})},q=r.memo(O);export{q as default};
