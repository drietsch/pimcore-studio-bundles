import{c as V,r as i,L as k,bY as x,j as l,aZ as z,a_ as P,bb as _,a$ as D,aJ as E,b_ as H}from"./index-DDFagdcg.js";import{u as L}from"./uniqueId-BN341tW-.js";import{u as U,a as B,b as M}from"./useOnInputChange-BVM7BjsY.js";import{a as O}from"./useBasicWidgetState-DlvpZzDY.js";import{I as A}from"./InputInstructions-C482tR9U.js";import{I as G}from"./input-CaX1DdER.js";const J=V("div",{target:"e11y4ecf0"})(({width:t})=>({position:"relative",width:t}),"");function K({disabled:t,element:e,widgetMgr:r,width:d,fragmentId:h}){var b;const[o,n]=i.useState(I(r,e)??null),[s,u]=i.useState(!1),S=i.useCallback(()=>{n(e.default??null),u(!0)},[e.default]),[W,m]=O({getStateFromWidgetMgr:I,getDefaultStateFromProto:N,getCurrStateFromProto:Y,updateWidgetMgrState:$,element:e,widgetMgr:r,fragmentId:h,onFormCleared:S});U(W,o,n,s);const[y,g]=i.useState(!1),a=k(),[c]=i.useState(()=>L("text_input_")),{placeholder:C,formId:f}=e,p=i.useCallback(()=>{u(!1),m({value:o,fromUi:!0})},[o,m]),T=x({formId:f})?r.allowFormEnterToSubmit(f):s,v=y&&d>a.breakpoints.hideWidgetDetails,w=i.useCallback(()=>{s&&p(),g(!1)},[s,p]),F=i.useCallback(()=>{g(!0)},[]),j=B({formId:e.formId,maxChars:e.maxChars,setDirty:u,setUiValue:n,setValueWithSource:m}),R=M(e.formId,p,s,r,h);return l.jsxs(J,{className:"stTextInput","data-testid":"stTextInput",width:d,children:[l.jsx(z,{label:e.label,disabled:t,labelVisibility:P((b=e.labelVisibility)==null?void 0:b.value),htmlFor:c,children:e.help&&l.jsx(_,{children:l.jsx(D,{content:e.help,placement:E.TOP_RIGHT})})}),l.jsx(G,{value:o??"",placeholder:C,onBlur:w,onFocus:F,onChange:j,onKeyPress:R,"aria-label":e.label,disabled:t,id:c,type:q(e),autoComplete:e.autocomplete,overrides:{Input:{style:{minWidth:0,"::placeholder":{opacity:"0.7"},lineHeight:a.lineHeights.inputWidget,paddingRight:a.spacing.sm,paddingLeft:a.spacing.sm,paddingBottom:a.spacing.sm,paddingTop:a.spacing.sm}},Root:{props:{"data-testid":"stTextInputRootElement"},style:{height:a.sizes.minElementHeight,borderLeftWidth:a.sizes.borderWidth,borderRightWidth:a.sizes.borderWidth,borderTopWidth:a.sizes.borderWidth,borderBottomWidth:a.sizes.borderWidth}}}}),v&&l.jsx(A,{dirty:s,value:o??"",maxLength:e.maxChars,inForm:x({formId:e.formId}),allowEnterToSubmit:T})]})}function I(t,e){return t.getStringValue(e)??null}function N(t){return t.default??null}function Y(t){return t.value??null}function $(t,e,r,d){e.setStringValue(t,r.value,{fromUi:r.fromUi},d)}function q(t){return t.type===H.Type.PASSWORD?"password":"text"}export{K as default};
