{"version":3,"file":"timer-CKf20FGl.js","sources":["../../../node_modules/d3-interpolate/src/transform/decompose.js","../../../node_modules/d3-interpolate/src/transform/parse.js","../../../node_modules/d3-interpolate/src/transform/index.js","../../../node_modules/d3-timer/src/timer.js"],"sourcesContent":["var degrees = 180 / Math.PI;\n\nexport var identity = {\n  translateX: 0,\n  translateY: 0,\n  rotate: 0,\n  skewX: 0,\n  scaleX: 1,\n  scaleY: 1\n};\n\nexport default function(a, b, c, d, e, f) {\n  var scaleX, scaleY, skewX;\n  if (scaleX = Math.sqrt(a * a + b * b)) a /= scaleX, b /= scaleX;\n  if (skewX = a * c + b * d) c -= a * skewX, d -= b * skewX;\n  if (scaleY = Math.sqrt(c * c + d * d)) c /= scaleY, d /= scaleY, skewX /= scaleY;\n  if (a * d < b * c) a = -a, b = -b, skewX = -skewX, scaleX = -scaleX;\n  return {\n    translateX: e,\n    translateY: f,\n    rotate: Math.atan2(b, a) * degrees,\n    skewX: Math.atan(skewX) * degrees,\n    scaleX: scaleX,\n    scaleY: scaleY\n  };\n}\n","import decompose, {identity} from \"./decompose.js\";\n\nvar svgNode;\n\n/* eslint-disable no-undef */\nexport function parseCss(value) {\n  const m = new (typeof DOMMatrix === \"function\" ? DOMMatrix : WebKitCSSMatrix)(value + \"\");\n  return m.isIdentity ? identity : decompose(m.a, m.b, m.c, m.d, m.e, m.f);\n}\n\nexport function parseSvg(value) {\n  if (value == null) return identity;\n  if (!svgNode) svgNode = document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\");\n  svgNode.setAttribute(\"transform\", value);\n  if (!(value = svgNode.transform.baseVal.consolidate())) return identity;\n  value = value.matrix;\n  return decompose(value.a, value.b, value.c, value.d, value.e, value.f);\n}\n","import number from \"../number.js\";\nimport {parseCss, parseSvg} from \"./parse.js\";\n\nfunction interpolateTransform(parse, pxComma, pxParen, degParen) {\n\n  function pop(s) {\n    return s.length ? s.pop() + \" \" : \"\";\n  }\n\n  function translate(xa, ya, xb, yb, s, q) {\n    if (xa !== xb || ya !== yb) {\n      var i = s.push(\"translate(\", null, pxComma, null, pxParen);\n      q.push({i: i - 4, x: number(xa, xb)}, {i: i - 2, x: number(ya, yb)});\n    } else if (xb || yb) {\n      s.push(\"translate(\" + xb + pxComma + yb + pxParen);\n    }\n  }\n\n  function rotate(a, b, s, q) {\n    if (a !== b) {\n      if (a - b > 180) b += 360; else if (b - a > 180) a += 360; // shortest path\n      q.push({i: s.push(pop(s) + \"rotate(\", null, degParen) - 2, x: number(a, b)});\n    } else if (b) {\n      s.push(pop(s) + \"rotate(\" + b + degParen);\n    }\n  }\n\n  function skewX(a, b, s, q) {\n    if (a !== b) {\n      q.push({i: s.push(pop(s) + \"skewX(\", null, degParen) - 2, x: number(a, b)});\n    } else if (b) {\n      s.push(pop(s) + \"skewX(\" + b + degParen);\n    }\n  }\n\n  function scale(xa, ya, xb, yb, s, q) {\n    if (xa !== xb || ya !== yb) {\n      var i = s.push(pop(s) + \"scale(\", null, \",\", null, \")\");\n      q.push({i: i - 4, x: number(xa, xb)}, {i: i - 2, x: number(ya, yb)});\n    } else if (xb !== 1 || yb !== 1) {\n      s.push(pop(s) + \"scale(\" + xb + \",\" + yb + \")\");\n    }\n  }\n\n  return function(a, b) {\n    var s = [], // string constants and placeholders\n        q = []; // number interpolators\n    a = parse(a), b = parse(b);\n    translate(a.translateX, a.translateY, b.translateX, b.translateY, s, q);\n    rotate(a.rotate, b.rotate, s, q);\n    skewX(a.skewX, b.skewX, s, q);\n    scale(a.scaleX, a.scaleY, b.scaleX, b.scaleY, s, q);\n    a = b = null; // gc\n    return function(t) {\n      var i = -1, n = q.length, o;\n      while (++i < n) s[(o = q[i]).i] = o.x(t);\n      return s.join(\"\");\n    };\n  };\n}\n\nexport var interpolateTransformCss = interpolateTransform(parseCss, \"px, \", \"px)\", \"deg)\");\nexport var interpolateTransformSvg = interpolateTransform(parseSvg, \", \", \")\", \")\");\n","var frame = 0, // is an animation frame pending?\n    timeout = 0, // is a timeout pending?\n    interval = 0, // are any timers active?\n    pokeDelay = 1000, // how frequently we check for clock skew\n    taskHead,\n    taskTail,\n    clockLast = 0,\n    clockNow = 0,\n    clockSkew = 0,\n    clock = typeof performance === \"object\" && performance.now ? performance : Date,\n    setFrame = typeof window === \"object\" && window.requestAnimationFrame ? window.requestAnimationFrame.bind(window) : function(f) { setTimeout(f, 17); };\n\nexport function now() {\n  return clockNow || (setFrame(clearNow), clockNow = clock.now() + clockSkew);\n}\n\nfunction clearNow() {\n  clockNow = 0;\n}\n\nexport function Timer() {\n  this._call =\n  this._time =\n  this._next = null;\n}\n\nTimer.prototype = timer.prototype = {\n  constructor: Timer,\n  restart: function(callback, delay, time) {\n    if (typeof callback !== \"function\") throw new TypeError(\"callback is not a function\");\n    time = (time == null ? now() : +time) + (delay == null ? 0 : +delay);\n    if (!this._next && taskTail !== this) {\n      if (taskTail) taskTail._next = this;\n      else taskHead = this;\n      taskTail = this;\n    }\n    this._call = callback;\n    this._time = time;\n    sleep();\n  },\n  stop: function() {\n    if (this._call) {\n      this._call = null;\n      this._time = Infinity;\n      sleep();\n    }\n  }\n};\n\nexport function timer(callback, delay, time) {\n  var t = new Timer;\n  t.restart(callback, delay, time);\n  return t;\n}\n\nexport function timerFlush() {\n  now(); // Get the current time, if not already set.\n  ++frame; // Pretend we’ve set an alarm, if we haven’t already.\n  var t = taskHead, e;\n  while (t) {\n    if ((e = clockNow - t._time) >= 0) t._call.call(undefined, e);\n    t = t._next;\n  }\n  --frame;\n}\n\nfunction wake() {\n  clockNow = (clockLast = clock.now()) + clockSkew;\n  frame = timeout = 0;\n  try {\n    timerFlush();\n  } finally {\n    frame = 0;\n    nap();\n    clockNow = 0;\n  }\n}\n\nfunction poke() {\n  var now = clock.now(), delay = now - clockLast;\n  if (delay > pokeDelay) clockSkew -= delay, clockLast = now;\n}\n\nfunction nap() {\n  var t0, t1 = taskHead, t2, time = Infinity;\n  while (t1) {\n    if (t1._call) {\n      if (time > t1._time) time = t1._time;\n      t0 = t1, t1 = t1._next;\n    } else {\n      t2 = t1._next, t1._next = null;\n      t1 = t0 ? t0._next = t2 : taskHead = t2;\n    }\n  }\n  taskTail = t0;\n  sleep(time);\n}\n\nfunction sleep(time) {\n  if (frame) return; // Soonest alarm already set, or will be.\n  if (timeout) timeout = clearTimeout(timeout);\n  var delay = time - clockNow; // Strictly less than if we recomputed clockNow.\n  if (delay > 24) {\n    if (time < Infinity) timeout = setTimeout(wake, time - clock.now() - clockSkew);\n    if (interval) interval = clearInterval(interval);\n  } else {\n    if (!interval) clockLast = clock.now(), interval = setInterval(poke, pokeDelay);\n    frame = 1, setFrame(wake);\n  }\n}\n"],"names":["degrees","identity","decompose","a","b","c","d","e","f","scaleX","scaleY","skewX","svgNode","parseCss","value","m","parseSvg","interpolateTransform","parse","pxComma","pxParen","degParen","pop","s","translate","xa","ya","xb","yb","q","i","number","rotate","scale","t","n","o","interpolateTransformCss","interpolateTransformSvg","frame","timeout","interval","pokeDelay","taskHead","taskTail","clockLast","clockNow","clockSkew","clock","setFrame","now","clearNow","Timer","timer","callback","delay","time","sleep","timerFlush","wake","nap","poke","t0","t1","t2"],"mappings":"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","x_google_ignoreList":[0,1,2,3]}